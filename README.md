# PL0Compiler

## 厦门大学 - 编译技术课程大作业

### 题目：PL/0编译器的设计与实现

### 要求：
设计并实现一个PL/0语言的编译器，能够将PL/0语言翻译成P-code语言（具体语言描述见《编译原理》（第3版），清华大学出版社，王生原等编著）。

### 完成截止时间：
春季学期最后一周结束。

### 作业提交形式：
实验报告 + 源代码，提交到学院FTP服务器上。

---

从零开始设计一个PL/0编译器确实是一个有挑战性的任务，但也是一个很好的学习编译原理的机会。PL/0语言是一种简单的编程语言，它包含了基本的控制结构（如条件语句和循环）、变量声明和基本的运算符等。

为了实现PL/0到P-code的编译器，可以按以下步骤进行设计：

---

## 1. 词法分析器（Lexer）
- **功能**：将PL/0源代码转换为一系列的记号（token），例如关键词、标识符、数字常量等。
- **输入**：源代码文本。
- **输出**：记号序列。
- **实现**：定义PL/0的关键词、操作符、标识符和常量等规则，通过正则表达式进行匹配，生成相应的记号。

---

## 2. 语法分析器（Parser）
- **功能**：根据PL/0语言的文法，分析记号序列，构建抽象语法树（AST）或语法分析树（Parse Tree）。
- **输入**：词法分析器输出的记号序列。
- **输出**：语法树。
- **实现**：使用递归下降解析法或LL(1)分析法来处理PL/0的文法规则。

---

## 3. 语义分析（Semantic Analysis）
- **功能**：对语法树进行检查，确保程序的语义是正确的，比如类型检查、作用域检查、符号表管理等。
- **输入**：语法分析树。
- **输出**：经过语义检查的树，或错误信息。
- **实现**：构建符号表来存储变量的类型、作用域等信息，并对语法树进行遍历，检测语义错误。

---

## 4. 中间代码生成（P-code生成）
- **功能**：将语法树或中间表示转化为P-code。P-code是一种简化的虚拟机代码。
- **输入**：语法树。
- **输出**：P-code指令序列。
- **实现**：定义P-code指令集，然后遍历语法树，将其翻译成相应的P-code指令。

---

## 5. 代码优化（可选）
- **功能**：对P-code进行优化，去除冗余的指令或进行一些常见的优化。
- **输入**：P-code指令序列。
- **输出**：优化后的P-code。
- **实现**：常见的优化技术有常量折叠、公共子表达式消除等。

---

## 6. 目标代码生成与执行（虚拟机或模拟器）
- **功能**：执行P-code，或将P-code转换为机器代码进行执行。
- **输入**：P-code。
- **输出**：执行结果或机器代码。
- **实现**：可以实现一个简单的P-code虚拟机来执行生成的P-code。

---

## PL/0的文法
以下是PL/0语言的文法描述：

```plaintext
程序 = 语句序列
语句序列 = 语句 | 语句序列 ";" 语句
语句 = 赋值语句 | 输出语句 | 条件语句 | 循环语句 | "begin" 语句序列 "end"
赋值语句 = 标识符 ":=" 表达式
输出语句 = "write" 表达式
条件语句 = "if" 表达式 "then" 语句
循环语句 = "while" 表达式 "do" 语句
表达式 = 项 | 表达式 "+" 项 | 表达式 "-" 项
项 = 因子 | 项 "*" 因子 | 项 "/" 因子
因子 = 标识符 | 数字 | "(" 表达式 ")"